# MODULE 04: ν¬μΈν„°μ™€ λ©”λ¨λ¦¬ (Pointers & Memory) Part 2

## 1. ν¬μΈν„° μ—°μ‚° (Pointer Arithmetic)
ν¬μΈν„°λ„ λ³€μλ‹κΉ λ§μ…, λΊ„μ…μ΄ κ°€λ¥ν• κΉμ”? λ„¤, κ°€λ¥ν•©λ‹λ‹¤.
ν•μ§€λ§ μΌλ°μ μΈ μν•™κ³Όλ” λ‹¤λ¥΄κ² λ™μ‘ν•©λ‹λ‹¤.

### 1.1. `+1`μ μλ―Έ
ν¬μΈν„°μ— 1μ„ λ”ν•λ‹¤λ” κ²ƒμ€ **"λ‹¤μ λ°©μΌλ΅ μ΄λ™ν•λΌ"**λ” λ»μ…λ‹λ‹¤.

- `char* c`: 1λ°”μ΄νΈ ν¬κΈ°μ λ°©. `+1` ν•λ©΄ μ£Όμ†κ°€ **1** μ¦κ°€.
- `int* i`: 4λ°”μ΄νΈ ν¬κΈ°μ λ°©. `+1` ν•λ©΄ μ£Όμ†κ°€ **4** μ¦κ°€.
- `double* d`: 8λ°”μ΄νΈ ν¬κΈ°μ λ°©. `+1` ν•λ©΄ μ£Όμ†κ°€ **8** μ¦κ°€.

```cpp
int a = 10;
int* p = &a;

// λ§μ•½ pμ μ£Όμ†κ°€ 1000μ΄λΌλ©΄?
p = p + 1; // 1004κ°€ λ©λ‹λ‹¤. (int ν¬κΈ°λ§νΌ μ ν”„)
```

> **π”‘ ν•µμ‹¬ μ›λ¦¬**: ν¬μΈν„° μ—°μ‚°μ€ λ¬Όλ¦¬μ  μ£Όμ†κ°€ μ•„λ‹λΌ **λ…Όλ¦¬μ  μΈλ±μ¤** λ‹¨μ„λ΅ μ›€μ§μ…λ‹λ‹¤.

---

## 2. λ°°μ—΄κ³Ό ν¬μΈν„°μ κ΄€κ³„
C++μ—μ„ λ°°μ—΄μ μ΄λ¦„(`arr`)μ€ **"λ°°μ—΄μ μ‹μ‘ μ£Όμ†"**λ΅ λ³€ν™(Decay)λμ–΄ μ‚¬μ©λ©λ‹λ‹¤.

### 2.1. λ°°μ—΄μ μ΄λ¦„ = μ²« λ²μ§Έ μ”μ†μ μ£Όμ†
λ‹¤μ λ‘ μ¤„μ€ μ™„μ „ν κ°™μ€ μλ―Έμ…λ‹λ‹¤.
```cpp
int arr[3] = {10, 20, 30};
int* p = arr;        // λ°°μ—΄ μ΄λ¦„μ€ μ‹μ‘ μ£Όμ†!
int* p2 = &arr[0];   // μ²« λ²μ§Έ μ”μ†μ μ£Όμ†!
```

### 2.2. ν™μƒμ μ§κΏ
λ°°μ—΄ ν‘κΈ°λ²• `[]`μ€ μ‚¬μ‹¤ ν¬μΈν„° μ—°μ‚°μ **λ¬Έλ²•μ  νΈμ(Syntactic Sugar)**μΌ λΏμ…λ‹λ‹¤.

| λ°°μ—΄ ν‘κΈ°λ²• (μ°λ¦¬κ°€ μ“°λ κ²ƒ) | ν¬μΈν„° ν‘κΈ°λ²• (μ‹¤μ  λ™μ‘) | μλ―Έ |
| :--- | :--- | :--- |
| `arr[0]` | `*(arr + 0)` | μ‹μ‘μ μ—μ„ 0μΉΈ μ΄λ™ ν›„ κ°’ μ½κΈ° |
| `arr[1]` | `*(arr + 1)` | μ‹μ‘μ μ—μ„ 1μΉΈ μ΄λ™(4λ°”μ΄νΈ) ν›„ κ°’ μ½κΈ° |
| `arr[i]` | `*(arr + i)` | μ‹μ‘μ μ—μ„ iμΉΈ μ΄λ™ ν›„ κ°’ μ½κΈ° |

μ»΄νμΌλ¬λ” `arr[i]`λ¥Ό λ³΄λ©΄ λ‚΄λ¶€μ μΌλ΅ `*(arr + i)`λ΅ λ°”κΏ”μ„ μ²λ¦¬ν•©λ‹λ‹¤.

---

## 3. ν¬μΈν„° vs λ°°μ—΄ (μ°¨μ΄μ )
"λ°°μ—΄μ΄ ν¬μΈν„°λ‘ λ‘κ°™λ‚μ”?" -> **μ•„λ‹μ”! μ—„μ—°ν λ‹¤λ¦…λ‹λ‹¤.**

### 3.1. ν¬κΈ° (`sizeof`)
- **λ°°μ—΄**: μ „μ²΄ ν¬κΈ°λ¥Ό λ°ν™ν•©λ‹λ‹¤.
- **ν¬μΈν„°**: μ£Όμ† κ°’ ν•λ‚(8byte)μ ν¬κΈ°λ§ λ°ν™ν•©λ‹λ‹¤.

```cpp
int arr[10];     // int 10κ° = 40 byte
int* p = arr;    // ν¬μΈν„° 1κ° = 8 byte (64bit)

cout << sizeof(arr);  // 40
cout << sizeof(p);    // 8
```

### 3.2. λ³€μ vs μƒμ
- **ν¬μΈν„° (`int* p`)**: μ£Όμ†λ¥Ό μ΄λ¦¬μ €λ¦¬ λ°”κΏ€ μ μλ” **λ³€μ**μ…λ‹λ‹¤.
- **λ°°μ—΄ μ΄λ¦„ (`int arr[]`)**: λ©”λ¨λ¦¬μ— κ³ μ •λ **μƒμ μ£Όμ†**μ…λ‹λ‹¤. λ°”κΏ€ μ μ—†μµλ‹λ‹¤.

```cpp
p = arr2; // (O) pκ°€ κ°€λ¦¬ν‚¤λ” κ³³ λ³€κ²½ κ°€λ¥
arr = p;  // (X) arrκ°€ κ°€λ¦¬ν‚¤λ” κ³³μ€ νƒμ–΄λ‚  λ•λ¶€ν„° κ³ μ •λ¨
```

---

## 4. Q&A
### Q. `*(p + 1)` λ€μ‹  `*p + 1`μ΄λΌκ³  μ“°λ©΄ μ–΄λ–»κ² λλ‚μ”?
**A. κ΄„νΈκ°€ μ—†μΌλ©΄ μ™„μ „ν λ‹¤λ¥Έ λ»μ΄ λ©λ‹λ‹¤.**
- `*(p + 1)`: μ£Όμ†λ¥Ό 1μΉΈ μ®κΈ΄ λ’¤(`p+1`) κ°’μ„ κΊΌλƒ„ -> **arr[1]**
- `*p + 1`: μ§€κΈ μ£Όμ†μ κ°’μ„ κΊΌλ‚Έ λ’¤(`*p`) 1μ„ λ”ν•¨ -> **arr[0] + 1**

### Q. λ°°μ—΄μ„ ν•¨μλ΅ λ³΄λ‚Ό λ• `int arr[]`λ‘ `int* arr`λ‘ λ­κ°€ λ‹¬λΌμ”?
**A. λ§¤κ°λ³€μμ—μ„λ” 100% λ‘κ°™μµλ‹λ‹¤.**
ν•¨μλ΅ λ°°μ—΄μ„ λ„κΈΈ λ•, C++μ€ λ°°μ—΄ μ „μ²΄λ¥Ό λ³µμ‚¬ν•μ§€ μ•κ³  **"μ‹μ‘ μ£Όμ†λ§"** λ³΄λƒ…λ‹λ‹¤.
κ·Έλμ„ `void Func(int arr[])`λΌκ³  μ¨λ„ μ»΄νμΌλ¬λ” `void Func(int* arr)`λ΅ ν•΄μ„ν•©λ‹λ‹¤.
μ¦‰, ν•¨μ μ•μ—μ„λ” `sizeof(arr)`λ¥Ό ν•λ©΄ λ°°μ—΄ μ „μ²΄ ν¬κΈ°κ°€ μ•„λ‹λΌ **ν¬μΈν„° ν¬κΈ°(8)**κ°€ λ‚μµλ‹λ‹¤. (μ£Όμ!)

### Q. κ·ΈλΌ ν•¨μ μ•μ—μ„ λ°°μ—΄ κΈΈμ΄λ” μ–΄λ–»κ² μ•μ•„μ”?
**A. ν¬μΈν„°λ§μΌλ΅λ” μ λ€ μ• μ μ—†μµλ‹λ‹¤. (λ¶κ°€λ¥)**
κ·Έλμ„ ν¬κ² λ‘ κ°€μ§€ λ°©λ²•μ„ μ‚¬μ©ν•©λ‹λ‹¤.

**1. κ³ μ „μ μΈ λ°©λ²• (C-Style)**
λ°°μ—΄μ ν¬κΈ°λ¥Ό **λ³„λ„ μΈμλ΅ κ°™μ΄** λ„κ²¨μ¤λ‹λ‹¤.
```cpp
void PrintArray(int* arr, int size) { // sizeλ¥Ό κ°™μ΄ λ°›μ
    for(int i=0; i < size; i++) {
        cout << arr[i] << endl;
    }
}

int main() {
    int data[5] = {1, 2, 3, 4, 5};
    PrintArray(data, 5); // κΈΈμ΄λ¥Ό μ£ΌμΈμ΄ μ•λ ¤μ¤μ•Ό ν•¨
}
```

**2. λ¨λ C++ λ°©λ²• (κ¶μ¥)**
`std::vector`λ¥Ό μ‚¬μ©ν•λ©΄ κΈΈμ΄ μ •λ³΄(`size()`)κ°€ κ°™μ΄ λ‹¤λ‹™λ‹λ‹¤.
```cpp
void PrintVector(const vector<int>& v) {
    for(int i=0; i < v.size(); i++) { // .size() μ‚¬μ© κ°€λ¥!
        cout << v[i] << endl;
    }
}
```
> **Basic Tutor's Note**: μ‹¤λ¬΄μ—μ„λ” μƒμ§ λ°°μ—΄(C Array)λ³΄λ‹¤ `std::vector`λ‚ `std::array`λ¥Ό μ“°λ” μ΄μ κ°€ λ°”λ΅ μ΄κ²ƒμ…λ‹λ‹¤. κΈΈμ΄λ¥Ό μΌμΌμ΄ λ“¤κ³  λ‹¤λ‹λ” μ‹¤μλ¥Ό μ¤„μ—¬μ¤λ‹λ‹¤.

### Q. `int arr[]` λ§¤κ°λ³€μλ” μ§„μ§ ν¬μΈν„°μΈκ°€μ”? `vector`λ‘ νΈν™ μ• λλ‚μ”?
**A. λ„¤, 100% ν¬μΈν„°μ…λ‹λ‹¤. μ„λ΅ νΈν™λμ§€ μ•μµλ‹λ‹¤.**

1.  **λ§¤κ°λ³€μμ μ§„μ‹¤**: `void Func(int arr[])`λΌκ³  μ¨λ„, μ»΄νμΌλ¬λ” `void Func(int* arr)`λ΅ λ°”κΏ”λ²„λ¦½λ‹λ‹¤. μ¦‰, λ°°μ—΄μ μ£Όμ†(Pointer)λ§ λ„μ–΄μµλ‹λ‹¤.
2.  **Vectorμ™€ νΈν™μ„±**: `std::vector`λ” ν΄λμ¤(κ°μ²΄)μ΄κ³ , `int[]`λ” μƒμ§ λ©”λ¨λ¦¬ μ£Όμ†μ…λ‹λ‹¤. νƒ€μ…μ΄ μ•„μ λ‹¬λΌμ„ λ€μ…ν•κ±°λ‚ μ „λ‹¬ν•  μ μ—†μµλ‹λ‹¤.

### Q. λ°°μ—΄ μ”μ†λ¥Ό μ¶λ ¥ν•λ ¤λ©΄ λ¬΄μ΅°κ±΄ forλ¬Έμ„ λλ ¤μ•Ό ν•λ‚μ”?
**A. λ„¤, C++μ κΈ°λ³Έ λ°°μ—΄(`int[]`)μ€ μ¤μ¤λ΅ μ¶λ ¥ν•λ” κΈ°λ¥μ΄ μ—†μµλ‹λ‹¤.**

ν•μ§€λ§ **λ²”μ„ κΈ°λ° forλ¬Έ (Range-based for)**μ„ μ“°λ©΄ μ΅°κΈ νΈν•΄μ§‘λ‹λ‹¤.
λ‹¨, **μ£Όμν•  μ **μ΄ μμµλ‹λ‹¤!

```cpp
int arr[3] = {1, 2, 3};

// 1. main ν•¨μ μ•μ—μ„λ” κ°€λ¥ (μ»΄νμΌλ¬κ°€ ν¬κΈ°λ¥Ό μ•)
for(int n : arr) {
    cout << n << " ";
}

// 2. ν•¨μλ΅ λ„κΈ°λ©΄ λ¶κ°€λ¥ (ν¬μΈν„°κ°€ λμ–΄μ„ ν¬κΈ°λ¥Ό λ¨λ¦„)
void Func(int* p) {
    // for(int n : p) {} // <--- μ—λ¬! (pμ ν¬κΈ°λ¥Ό λ°λΌμ„)
}
```
> **κ²°λ΅ **: ν•¨μλ΅ λ„κΈ΄ λ°°μ—΄μ„ μ¶λ ¥ν•λ ¤λ©΄, μ•„κΉ λ°°μ΄λ€λ΅ **`size`λ¥Ό κ°™μ΄ λ„κ²¨μ„ μΌλ° forλ¬Έ**μ„ μ¨μ•Ό ν•©λ‹λ‹¤.

---

λ‹¤μμ€ ν¬μΈν„° μ—°μ‚°μ„ μ§μ ‘ λμΌλ΅ ν™•μΈν•λ” μ‹¤μµμ„ μ§„ν–‰ν•κ² μµλ‹λ‹¤.
